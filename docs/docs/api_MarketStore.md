---
id: MarketStore
title: MarketStore
---

<div class="contract-doc"><div class="contract"><h2 class="contract-header"><span class="contract-kind">contract</span> MarketStore</h2><p class="description">Stores and manages the state of all listings in the marketplace. This is a low level storage contract that provides getters and setters for creating, accessing and modifying listings. Currently, a reference is stored for fetching the listing image from a distributed database due to the expensive cost of storing large data on the blockchain. For optimisation reasons, business logic should be implemented in the client application.</p><div class="source">Source: <a href="https://github.com/ks510/trade-now/blob/v1.0.0/contracts/MarketStore.sol" target="_blank">contracts/MarketStore.sol</a></div><div class="author">Author: Karen Suen</div></div><div class="index"><h2>Index</h2><ul><li><a href="MarketStore.html#createListingInStore">createListingInStore</a></li><li><a href="MarketStore.html#disableListing">disableListing</a></li><li><a href="MarketStore.html#">fallback</a></li><li><a href="MarketStore.html#getAllSellerListings">getAllSellerListings</a></li><li><a href="MarketStore.html#getListing">getListing</a></li><li><a href="MarketStore.html#getListingDescription">getListingDescription</a></li><li><a href="MarketStore.html#getListingImage">getListingImage</a></li><li><a href="MarketStore.html#getListingPrice">getListingPrice</a></li><li><a href="MarketStore.html#getListingSeller">getListingSeller</a></li><li><a href="MarketStore.html#getListingState">getListingState</a></li><li><a href="MarketStore.html#getListingTitle">getListingTitle</a></li><li><a href="MarketStore.html#listingAvailable">listingAvailable</a></li><li><a href="MarketStore.html#listingSold">listingSold</a></li></ul></div><div class="reference"><h2>Reference</h2><div class="functions"><h3>Functions</h3><ul><li><div class="item function"><span id="createListingInStore" class="anchor-marker"></span><h4 class="name">createListingInStore</h4><div class="body"><code class="signature">function <strong>createListingInStore</strong><span>(uint _price, string _title, string _desc, string _image, address _seller) </span><span>public </span><span>returns  (uint) </span></code><hr/><div class="description"><p>Create a new listing in the marketplace and returns its generated id. Indexing of listings always starts at 1. The unique ID of each listing is auto generated using the incremented total listing count. The list of seller&#x27;s owned listings are also updated.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_price</code> - The selling price of the new listing in Wei</div><div><code>_title</code> - The title of the new listing</div><div><code>_desc</code> - The reference hash of listing description stored in a distributed database</div><div><code>_image</code> - The reference hash of listing image stored in a distributed database</div><div><code>_seller</code> - The seller address that created this listing (owner)</div></dd><dt><span class="label-return">Returns:</span></dt><dd>Generated id of listing in the marketplace</dd></dl></div></div></li><li><div class="item function"><span id="disableListing" class="anchor-marker"></span><h4 class="name">disableListing</h4><div class="body"><code class="signature">function <strong>disableListing</strong><span>(uint _id) </span><span>public </span></code><hr/><div class="description"><p>Disable the given listing by updating its status to INACTIVE.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_id</code> - The id of listing to disable</div></dd></dl></div></div></li><li><div class="item function"><span id="fallback" class="anchor-marker"></span><h4 class="name">fallback</h4><div class="body"><code class="signature">function <strong></strong><span>() </span><span>public </span></code><hr/><div class="description"><p>Constructor initialises marketplace with no listings.</p></div></div></div></li><li><div class="item function"><span id="getAllSellerListings" class="anchor-marker"></span><h4 class="name">getAllSellerListings</h4><div class="body"><code class="signature">function <strong>getAllSellerListings</strong><span>(address _seller) </span><span>public </span><span>view </span><span>returns  (uint[]) </span></code><hr/><div class="description"><p>Returns a list of all listing id&#x27;s created by an address (user).</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_seller</code> - The address to retrieve all listing ids for</div></dd><dt><span class="label-return">Returns:</span></dt><dd>A list of listing ids</dd></dl></div></div></li><li><div class="item function"><span id="getListing" class="anchor-marker"></span><h4 class="name">getListing</h4><div class="body"><code class="signature">function <strong>getListing</strong><span>(uint _id) </span><span>public </span><span>view </span><span>returns  (uint, uint, string, string, string, address, uint) </span></code><hr/><div class="description"><p>The listing state enum value is returned as an integer, Returns all information about a listing in the marketplace as a tuple.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_id</code> - The id of listing to return</div></dd><dt><span class="label-return">Returns:</span></dt><dd>Listing id, price in Wei, title, description, image reference, seller address</dd></dl></div></div></li><li><div class="item function"><span id="getListingDescription" class="anchor-marker"></span><h4 class="name">getListingDescription</h4><div class="body"><code class="signature">function <strong>getListingDescription</strong><span>(uint _id) </span><span>public </span><span>view </span><span>returns  (string) </span></code><hr/><div class="description"><p>Returns the description reference of a given listing.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_id</code> - The id of listing to retrieve the description of</div></dd><dt><span class="label-return">Returns:</span></dt><dd>Listing description</dd></dl></div></div></li><li><div class="item function"><span id="getListingImage" class="anchor-marker"></span><h4 class="name">getListingImage</h4><div class="body"><code class="signature">function <strong>getListingImage</strong><span>(uint _id) </span><span>public </span><span>view </span><span>returns  (string) </span></code><hr/><div class="description"><p>Returns the image reference of a given listing.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_id</code> - The id of listing to retrieve the image reference of</div></dd><dt><span class="label-return">Returns:</span></dt><dd>Image reference</dd></dl></div></div></li><li><div class="item function"><span id="getListingPrice" class="anchor-marker"></span><h4 class="name">getListingPrice</h4><div class="body"><code class="signature">function <strong>getListingPrice</strong><span>(uint _id) </span><span>public </span><span>view </span><span>returns  (uint) </span></code><hr/><div class="description"><p>Returns the selling price of a given listing in Wei (smallest denomination of Ether).</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_id</code> - The id of listing to retrieve selling price of</div></dd><dt><span class="label-return">Returns:</span></dt><dd>Listing price in Wei</dd></dl></div></div></li><li><div class="item function"><span id="getListingSeller" class="anchor-marker"></span><h4 class="name">getListingSeller</h4><div class="body"><code class="signature">function <strong>getListingSeller</strong><span>(uint _id) </span><span>public </span><span>view </span><span>returns  (address) </span></code><hr/><div class="description"><p>Returns the seller of the listing.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_id</code> - The id of listing to retrieve the state of</div></dd><dt><span class="label-return">Returns:</span></dt><dd>Seller address</dd></dl></div></div></li><li><div class="item function"><span id="getListingState" class="anchor-marker"></span><h4 class="name">getListingState</h4><div class="body"><code class="signature">function <strong>getListingState</strong><span>(uint _id) </span><span>public </span><span>view </span><span>returns  (uint) </span></code><hr/><div class="description"><p>Returns the current state of a listing as an integer.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_id</code> - The id of listing to retrieve the state of</div></dd><dt><span class="label-return">Returns:</span></dt><dd>Listing status</dd></dl></div></div></li><li><div class="item function"><span id="getListingTitle" class="anchor-marker"></span><h4 class="name">getListingTitle</h4><div class="body"><code class="signature">function <strong>getListingTitle</strong><span>(uint _id) </span><span>public </span><span>view </span><span>returns  (string) </span></code><hr/><div class="description"><p>Returns the title of a given listing.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_id</code> - The id of listing to retrieve title of</div></dd><dt><span class="label-return">Returns:</span></dt><dd>Listing title</dd></dl></div></div></li><li><div class="item function"><span id="listingAvailable" class="anchor-marker"></span><h4 class="name">listingAvailable</h4><div class="body"><code class="signature">function <strong>listingAvailable</strong><span>(uint _id) </span><span>public </span></code><hr/><div class="description"><p>Updates the given listing to AVAILABLE status.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_id</code> - The id of listing to make available in marketplace</div></dd></dl></div></div></li><li><div class="item function"><span id="listingSold" class="anchor-marker"></span><h4 class="name">listingSold</h4><div class="body"><code class="signature">function <strong>listingSold</strong><span>(uint _id) </span><span>public </span></code><hr/><div class="description"><p>Updates the given listing to SOLD status.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_id</code> - The id of sold listing</div></dd></dl></div></div></li></ul></div></div></div>
